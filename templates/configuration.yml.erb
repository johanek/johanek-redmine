default:
  delivery_method: :smtp
  smtp_settings:
      address: <%= scope.lookupvar('redmine::smtp_server') %>
      port: <%= scope.lookupvar('redmine::smtp_port') %>
      domain: <%= scope.lookupvar('redmine::smtp_domain') %>
<% if scope.lookupvar('redmine::smtp_ssl') == true -%>
      ssl: true
<% end %>
<% if scope.lookupvar('redmine::smtp_enable_starttls_auto') == false -%>
      enable_starttls_auto: false
<% end %>
<% if scope.lookupvar('redmine::smtp_openssl_verify_mode') != 'peer' -%>
     openssl_verify_mode: <%= scope.lookupvar('redmine::smtp_openssl_verify_mode') %>
<% end %>
<% if scope.lookupvar('redmine::smtp_authentication') != false -%>
      authentication: <%= scope.lookupvar('redmine::smtp_authentication') %>
      user_name: <%= scope.lookupvar('redmine::smtp_username') %>
      password: <%= scope.lookupvar('redmine::smtp_password') %>
<% end -%>

<% scope.lookupvar('redmine::override_options').keys.sort.each do |key| -%>
  <%= key %>: <%= scope.lookupvar('redmine::override_options')[key] %>
<% end -%>
